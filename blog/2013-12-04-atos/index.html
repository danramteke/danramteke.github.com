<!DOCTYPE html><html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="geo.placename" content="New York City">
    <meta name="geo.region" content="US-NY">
    <meta name="description" content="Freelance iOS App Developer for New York City">
    <meta name="keywords" content="nyc, new york city, ios, swift, iphone, developer, programmer, engineer, freelance, contractor, devops, kubernetes, digitalocean, docker, terraform, xcode, subway, transit, graphics, design">
    <meta name="author" content="Daniel Ramteke">
    <title>Symbolicating RubyMotion Crash Logs :: Daniel Ramteke iOS, DevOps, and web development in New York City</title>

<link rel="stylesheet" href="/assets/6b960ed9.59ee9b53.css" /></head>
<body class="bg-sky-100 text-sky-900 ">

<div class="sm:sticky sm:top-0 sm:flex sm:justify-between sm:items-center bg-neutral-800 text-blue-50 py-2">
  <div class="text-3xl font-bold px-8"><a href="/">Daniel Ramteke</a></div>


  <div class="sm:flex px-4">

    <a href="/resume" class="px-4 hover:bg-sky-900 hover:text-white text-sky-50 corner-2 rounded-full">
      Resume
    </a>

    <a href="/testimonials" class="px-4 hover:bg-sky-900 hover:text-white text-sky-50 corner-2 rounded-full">
      Testimonials
    </a>

    <a href="/press" class="px-4 hover:bg-sky-900 hover:text-white text-sky-50 corner-2 rounded-full">
      Press
    </a>

    <a href="/contact" class="px-4 hover:bg-sky-900 hover:text-white text-sky-50 corner-2 rounded-full">
      Contact
    </a>
  </div>

</div>

<div>
<div class="px-8 container">
    <div class="prose mt-8
prose-a:text-red-600 prose-a:no-underline
hover:prose-a:text-red-400 hover:prose-a:underline hover:prose-a:decoration-2

prose-h1:font-sans
prose-h2:font-sans
prose-h3:font-sans
prose-h4:font-sans
prose-h5:font-sans
prose-h6:font-sans
prose-strong:font-sans">
 <h1 id="symbolicating-rubymotion-crash-logs">Symbolicating RubyMotion Crash Logs</h1>
<p><strong>Update!</strong> The information in this blog post is mostly irrelevent now that you can type <code>rake crashlog:device</code> to symbolicate crash logs from your device as of RubyMotion 2.18. <strong>Thanks!</strong></p>
<p>Symbolicating a crash log is the process of finding a line number in source from a crash log. Crash logs often look like <a href="http://i.imgur.com/HLXbG1I.png">this</a>. This specific process is interesting in particular to RubyMotion because Apple’s Xcode doesn’t symbolicate to Ruby code.</p>
<p>Now let’s see how it’s done.</p>
<p>After running <code>rake device</code>, you have binary files in the build directory, including a <code>.dSYM</code> file. Go ahead and <code>cd</code> into that directory, I’ll be typing all commands from that directory. Here is the directory listing for my <code>build/iPhoneOS-7.0-Development</code> directory: <img src="http://i.imgur.com/Nas5e5N.png" alt="Imgur"></p>
<p>A good example to use is this crash log I received from our customer: <a href="%7B%7Bsite.baseurl%7D%7Dimages/symbolicating-crashlog.png">Crash Trace</a> <a href="%7B%7Bsite.baseurl%7D%7Dimages/symbolicating-binaryimages.png">Binary Images</a> Another good resource is this handy guide to getting crash logs from Apple devices: <a href="http://help.getpocket.com/customer/portal/articles/500338-how-to-find-the-iphone-ipad-app-crash-logs">Pocket</a></p>
<p>Next, we’re going to use a command called <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/atos.1.html">atos</a>. You’ll need the load address, the architecture, and the list of addresses from the crash log. I’ll show where to get these from the crash log.</p>
<p>Here is the command I typed based on the crash log example: <code>xcrun atos -l 0xed000 -arch armv7 0x00a22a30 0x00a22b56 0x0098caec 0x00a20866 0x00a0a930 0x00a09a66 0x00a0a420 0x0080b524 0x0081241e 0x008124ae -o Redacted\ \(Dev\).dSYM/Contents/Resources/DWARF/Redacted\ \(Dev\)</code></p>
<p>The value for the <code>-l</code> flag is taken from the Binary Images section. That first number there. The value for the <code>-arch</code> flag is <code>arm7</code> since the binaries were built for an iOS device.</p>
<p>The rest of the hex numbers are taken from the first screen shot of the crash log. I copy/pasted them from the crash log for now (would like to hear of a better way). And I got this output:</p>
<pre is:raw="" class="astro-code" style="background-color: #0d1117; overflow-x: auto;"><code><span class="line"><span style="color: #c9d1d9">got symbolicator for Redacted (Dev).dSYM/Contents/Resources/DWARF/Redacted (Dev), base address 4000</span></span>
<span class="line"><span style="color: #c9d1d9">__vm_raise() (in Redacted (Dev)) + 276</span></span>
<span class="line"><span style="color: #c9d1d9">rb_vm_raise (in Redacted (Dev)) + 82</span></span>
<span class="line"><span style="color: #c9d1d9">rb_frozen_class_p (in Redacted (Dev)) + 72</span></span>
<span class="line"><span style="color: #c9d1d9">rb_vm_method_missing (in Redacted (Dev)) + 358</span></span>
<span class="line"><span style="color: #c9d1d9">rb_vm_dispatch (in Redacted (Dev)) + 3060</span></span>
<span class="line"><span style="color: #c9d1d9">rb_vm_trigger_method_missing (in Redacted (Dev)) + 522</span></span>
<span class="line"><span style="color: #c9d1d9">rb_vm_dispatch (in Redacted (Dev)) + 1764</span></span>
<span class="line"><span style="color: #c9d1d9">vm_fast_plus (in Redacted (Dev)) + 356</span></span>
<span class="line"><span style="color: #c9d1d9">__unnamed_28 (in Redacted (Dev)) + 274</span></span>
<span class="line"><span style="color: #c9d1d9">rb_scope__commandDidStart:__ (in Redacted (Dev)) (login_view_controller.rb:56)</span></span></code></pre>
<p>As you can see, the crash was in the login controller. Looking at that file, it’s the Facebook log in code.</p>
<p>Although having to copy/paste addresses into the command line isn’t ideal, the main goal is retrieving a line number in ruby code (although off by one) from an otherwise opaque crash log intended for Xcode. And this allows further debugging.</p>
</div>
  </div>
</div>

<footer class=" mt-8 pt-2 border-solid bg-sky-900  border-t px-8 text-slate-300 ">
    <p class="py-8"><a href="/" class="hover:underline">&copy;2023 Daniel Ramteke</a> </p>
</footer>
</body></html>